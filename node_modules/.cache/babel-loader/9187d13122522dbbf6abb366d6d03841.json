{"ast":null,"code":"var _jsxFileName = \"/Users/scottgemmell/Github/recipes-collector/src/pages/ListPage.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectFavourites, toggleFavourite } from \"../features/favourites/favouritesSlice\";\nimport { RecipesList, Spinner } from \"../common/\";\n\nconst ListPage = () => {\n  const myFavourites = useSelector(selectFavourites);\n  const dispatch = useDispatch();\n  const [recipeResource, setRecipeResource] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  useEffect(() => {\n    window.localStorage.setItem(\"favourites\", JSON.stringify(myFavourites));\n  }, [myFavourites]);\n  useEffect(() => {\n    fetch(\"https://www.themealdb.com/api/json/v1/1/search.php?f=b\") // data.recipes\n    //fetch(\"https://api.spoonacular.com/recipes/random?number=20&tags=vegetarian&apiKey=3fcd89c737204c9d9e588415088e7b96\")\n    .then(res => res.json()).then(data => {\n      setRecipeResource(data.meals);\n      setIsLoading(false);\n    }).catch(err => {\n      setHasError(true);\n      setIsLoading(false); //console.log(err);\n    }); // return () => {\n    // \tcleanup\n    // };\n  }, []);\n\n  const handleFavourite = e => {\n    //console.log(\"handleFavourite\", e);\n    dispatch(toggleFavourite(e.idMeal));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, \"Random\"), hasError && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 18\n    }\n  }, \":(\"), isLoading && /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 19\n    }\n  }), recipeResource && /*#__PURE__*/React.createElement(RecipesList, {\n    list: recipeResource,\n    handleFavourite: handleFavourite,\n    myFavourites: myFavourites,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 24\n    }\n  })));\n};\n\nexport default ListPage;","map":{"version":3,"sources":["/Users/scottgemmell/Github/recipes-collector/src/pages/ListPage.js"],"names":["React","useEffect","useState","useSelector","useDispatch","selectFavourites","toggleFavourite","RecipesList","Spinner","ListPage","myFavourites","dispatch","recipeResource","setRecipeResource","isLoading","setIsLoading","hasError","setHasError","window","localStorage","setItem","JSON","stringify","fetch","then","res","json","data","meals","catch","err","handleFavourite","e","idMeal"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,gBAAT,EAA2BC,eAA3B,QAAkD,wCAAlD;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,YAArC;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AACtB,QAAMC,YAAY,GAAGP,WAAW,CAACE,gBAAD,CAAhC;AACA,QAAMM,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAM,CAACQ,cAAD,EAAiBC,iBAAjB,IAAsCX,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACY,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,KAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACfiB,IAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,EAA0CC,IAAI,CAACC,SAAL,CAAeZ,YAAf,CAA1C;AACA,GAFQ,EAEN,CAACA,YAAD,CAFM,CAAT;AAIAT,EAAAA,SAAS,CAAC,MAAM;AACfsB,IAAAA,KAAK,CAAC,wDAAD,CAAL,CACA;AACA;AAFA,KAGEC,IAHF,CAGOC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAHd,EAIEF,IAJF,CAIQG,IAAD,IAAU;AACfd,MAAAA,iBAAiB,CAACc,IAAI,CAACC,KAAN,CAAjB;AACAb,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACA,KAPF,EAQEc,KARF,CAQSC,GAAD,IAAS;AACfb,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAF,MAAAA,YAAY,CAAC,KAAD,CAAZ,CAFe,CAGf;AACA,KAZF,EADe,CAcf;AACA;AACA;AACA,GAjBQ,EAiBN,EAjBM,CAAT;;AAmBA,QAAMgB,eAAe,GAAIC,CAAD,IAAO;AAC9B;AACArB,IAAAA,QAAQ,CAACL,eAAe,CAAC0B,CAAC,CAACC,MAAH,CAAhB,CAAR;AACA,GAHD;;AAKA,sBACC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,EAKEjB,QAAQ,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UALd,EAOEF,SAAS,iBAAI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPf,EASEF,cAAc,iBAAI,oBAAC,WAAD;AAClB,IAAA,IAAI,EAAEA,cADY;AAElB,IAAA,eAAe,EAAEmB,eAFC;AAGlB,IAAA,YAAY,EAAErB,YAHI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATpB,CADD,CADD;AAmBA,CAtDD;;AAwDA,eAAeD,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectFavourites, toggleFavourite } from \"../features/favourites/favouritesSlice\";\r\nimport { RecipesList, Spinner } from \"../common/\";\r\n\r\nconst ListPage = () => {\r\n\tconst myFavourites = useSelector(selectFavourites);\r\n\tconst dispatch = useDispatch();\r\n\tconst [recipeResource, setRecipeResource] = useState([]);\r\n\tconst [isLoading, setIsLoading] = useState(true);\r\n\tconst [hasError, setHasError] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.localStorage.setItem(\"favourites\", JSON.stringify(myFavourites));\r\n\t}, [myFavourites]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch(\"https://www.themealdb.com/api/json/v1/1/search.php?f=b\")\r\n\t\t// data.recipes\r\n\t\t//fetch(\"https://api.spoonacular.com/recipes/random?number=20&tags=vegetarian&apiKey=3fcd89c737204c9d9e588415088e7b96\")\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tsetRecipeResource(data.meals);\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetHasError(true);\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\t//console.log(err);\r\n\t\t\t});\r\n\t\t// return () => {\r\n\t\t// \tcleanup\r\n\t\t// };\r\n\t}, []);\r\n\r\n\tconst handleFavourite = (e) => {\r\n\t\t//console.log(\"handleFavourite\", e);\r\n\t\tdispatch(toggleFavourite(e.idMeal));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"App-main\">\r\n\t\t\t<div className=\"App-inner\">\r\n\t\t\t\t<h1>\r\n\t\t\t\t\tRandom\r\n\t\t\t\t</h1>\r\n\t\t\t\t\r\n\t\t\t\t{hasError && <div>:(</div>}\r\n\r\n\t\t\t\t{isLoading && <Spinner />}\r\n\r\n\t\t\t\t{recipeResource && <RecipesList \r\n\t\t\t\t\tlist={recipeResource} \r\n\t\t\t\t\thandleFavourite={handleFavourite}\r\n\t\t\t\t\tmyFavourites={myFavourites}\r\n\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ListPage;\r\n"]},"metadata":{},"sourceType":"module"}