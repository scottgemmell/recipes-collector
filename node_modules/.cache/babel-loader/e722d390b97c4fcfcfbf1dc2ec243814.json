{"ast":null,"code":"var _jsxFileName = \"/Users/scottgemmell/Github/recipes-collector/src/common/FavouritesThumb.js\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectFavourites, toggleFavourite } from \"../features/favourites/favouritesSlice\";\nimport { Link } from \"react-router-dom\";\nimport { FaHeart, FaRegHeart } from \"react-icons/fa\";\nimport { Spinner } from \"../common\";\n\nconst FavouritesThumb = ({\n  idx\n}) => {\n  const myFavourites = useSelector(selectFavourites);\n  const dispatch = useDispatch();\n  const [recipeResource, setRecipeResource] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const isFav = myFavourites.includes(+idx);\n  useEffect(() => {\n    //console.log(\"STARTUP\");\n    fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${idx}`).then(res => {\n      return res.json();\n    }).then(data => {\n      //console.log(\"B\", data.meals[0]);\n      return data.meals[0];\n    }).then(data => {\n      //console.log(\"DATA\", data)\n      setRecipeResource(data);\n      setIsLoading(false);\n    });\n  }, [idx]);\n\n  const handleFavourite = e => {\n    //console.log(\"handleFavourite\", e);\n    dispatch(toggleFavourite(e.idMeal));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 3\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }) : /*#__PURE__*/React.createElement(\"li\", {\n    className: \"thumb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"thumb__meta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"thumb__title\",\n    to: `/recipe/${idx}/`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, recipeResource.strMeal), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"thumb__toggle\",\n    onClick: () => handleFavourite({\n      idMeal: +idx\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, isFav ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FaHeart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 10\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"u-visually-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 22\n    }\n  }, \"Add to favourites\")) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FaRegHeart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 10\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"u-visually-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }\n  }, \"Remove from favourites\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"thumb__img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: recipeResource.strMealThumb,\n    width: 320,\n    height: 320,\n    alt: recipeResource.strMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }))));\n};\n\nFavouritesThumb.propTypes = {\n  idx: PropTypes.number.isRequired\n};\nexport default FavouritesThumb;","map":{"version":3,"sources":["/Users/scottgemmell/Github/recipes-collector/src/common/FavouritesThumb.js"],"names":["React","Fragment","useEffect","useState","PropTypes","useSelector","useDispatch","selectFavourites","toggleFavourite","Link","FaHeart","FaRegHeart","Spinner","FavouritesThumb","idx","myFavourites","dispatch","recipeResource","setRecipeResource","isLoading","setIsLoading","isFav","includes","fetch","then","res","json","data","meals","handleFavourite","e","idMeal","strMeal","strMealThumb","propTypes","number","isRequired"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectFavourites, toggleFavourite } from \"../features/favourites/favouritesSlice\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FaHeart, FaRegHeart } from \"react-icons/fa\";\r\nimport { Spinner } from \"../common\";\r\n\r\nconst FavouritesThumb = ({ idx }) => {\r\n\r\n\tconst myFavourites = useSelector(selectFavourites);\r\n\tconst dispatch = useDispatch();\r\n\tconst [recipeResource, setRecipeResource] = useState([]);\r\n\tconst [isLoading, setIsLoading] = useState(true);\r\n\tconst isFav = myFavourites.includes(+idx);\r\n\t\r\n\tuseEffect(() => {\r\n\t\t//console.log(\"STARTUP\");\r\n\t\tfetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${idx}`)\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.json();\r\n\t\t\t})\r\n\t\t\t.then((data) => {\r\n\t\t\t//console.log(\"B\", data.meals[0]);\r\n\t\t\t\treturn data.meals[0];\r\n\t\t\t})\r\n\t\t\t.then((data) => {\r\n\t\t\t//console.log(\"DATA\", data)\r\n\t\t\t\tsetRecipeResource(data);\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t});\r\n\t}, [idx]);\r\n\r\n\tconst handleFavourite = (e) => {\r\n\t\t//console.log(\"handleFavourite\", e);\r\n\t\tdispatch(toggleFavourite(e.idMeal));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{isLoading \r\n\t\t\t\t? <Spinner /> \r\n\t\t\t\t: <li className=\"thumb\">\r\n\t\t\t\t\t<div className=\"thumb__meta\">\r\n\t\t\t\t\t\t<Link className=\"thumb__title\" to={`/recipe/${idx}/`}>\r\n\t\t\t\t\t\t\t{recipeResource.strMeal}\r\n\t\t\t\t\t\t</Link> \r\n\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\tclassName=\"thumb__toggle\" \r\n\t\t\t\t\t\t\tonClick={() => handleFavourite({ idMeal: +idx })}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isFav \r\n\t\t\t\t\t\t\t\t? <Fragment>\r\n\t\t\t\t\t\t\t\t\t<FaHeart /> <span className=\"u-visually-hidden\">Add to favourites</span>\r\n\t\t\t\t\t\t\t\t</Fragment> \r\n\t\t\t\t\t\t\t\t: <Fragment>\r\n\t\t\t\t\t\t\t\t\t<FaRegHeart /> <span className=\"u-visually-hidden\">Remove from favourites</span>\r\n\t\t\t\t\t\t\t\t</Fragment>} \r\n\t\t\t\t\t\t</button> \r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"thumb__img\">\r\n\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\tsrc={recipeResource.strMealThumb} \r\n\t\t\t\t\t\t\twidth={320} \r\n\t\t\t\t\t\t\theight={320} \r\n\t\t\t\t\t\t\talt={recipeResource.strMeal} \r\n\t\t\t\t\t\t/> \r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nFavouritesThumb.propTypes = {\r\n\tidx: PropTypes.number.isRequired, \r\n};\r\n\r\nexport default FavouritesThumb;\r\n"]},"metadata":{},"sourceType":"module"}