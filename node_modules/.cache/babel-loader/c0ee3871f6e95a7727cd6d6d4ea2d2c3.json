{"ast":null,"code":"var _jsxFileName = \"/Users/scottgemmell/Github/recipes-collector/src/pages/ItemPage.js\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectFavourites, toggleFavourite } from \"../features/favourites/favouritesSlice\";\nimport { Spinner } from \"../common/\";\nimport { FaHeart, FaRegHeart } from \"react-icons/fa\";\n\nconst fetchByMealId = mealId => fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`).then(res => res.json()).then(data => {\n  return data.meals[0];\n});\n\nconst fetchFavouriteMeals = meals => meals.map(mealId => fetchByMealId(mealId));\n\nconst ItemPage = () => {\n  // Nothing\n  const myFavourites = useSelector(selectFavourites);\n  const dispatch = useDispatch();\n  const [recipeResource, setRecipeResource] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const {\n    mealId\n  } = useParams();\n  useEffect(() => {\n    //console.log(\"STARTUP\");\n    Promise.all(fetchFavouriteMeals([+mealId])).then(data => {\n      //console.log(\"DATA\", data)\n      setRecipeResource(data);\n      setIsLoading(false);\n    });\n  }, [mealId]);\n\n  const handleFavourite = e => {\n    //console.log(\"handleFavourite\", e);\n    dispatch(toggleFavourite(e.idMeal));\n  };\n\n  const [recipe] = recipeResource;\n  const isFav = recipe && myFavourites.includes(+recipe.idMeal);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 8\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item__meta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 8\n    }\n  }, recipe.strMeal), /*#__PURE__*/React.createElement(\"dl\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"dt\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"dd\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, recipe.strInstructions), /*#__PURE__*/React.createElement(\"dt\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Area\"), /*#__PURE__*/React.createElement(\"dd\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, recipe.strArea), /*#__PURE__*/React.createElement(\"dt\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"dd\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, recipe.strCategory), /*#__PURE__*/React.createElement(\"dt\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, \"Tags\"), /*#__PURE__*/React.createElement(\"dd\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, recipe.strTags))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item__thumb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: recipe.strMealThumb,\n    height: 300,\n    width: 300,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"cta\",\n    onClick: () => handleFavourite({\n      idMeal: +recipe.idMeal\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, !isFav ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaRegHeart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 23\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 38\n    }\n  }, \"Add to favourites\")) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaHeart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 23\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 35\n    }\n  }, \"Remove from favourites\"))))))));\n};\n\nexport default ItemPage;","map":{"version":3,"sources":["/Users/scottgemmell/Github/recipes-collector/src/pages/ItemPage.js"],"names":["React","Fragment","useEffect","useState","useParams","useSelector","useDispatch","selectFavourites","toggleFavourite","Spinner","FaHeart","FaRegHeart","fetchByMealId","mealId","fetch","then","res","json","data","meals","fetchFavouriteMeals","map","ItemPage","myFavourites","dispatch","recipeResource","setRecipeResource","isLoading","setIsLoading","Promise","all","handleFavourite","e","idMeal","recipe","isFav","includes","strMeal","strInstructions","strArea","strCategory","strTags","strMealThumb"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAqD,OAArD;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,gBAAT,EAA2BC,eAA3B,QAAkD,wCAAlD;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,gBAApC;;AAEA,MAAMC,aAAa,GAAGC,MAAM,IAAIC,KAAK,CAAE,wDAAuDD,MAAO,EAAhE,CAAL,CAC9BE,IAD8B,CACzBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADkB,EAE9BF,IAF8B,CAExBG,IAAD,IAAU;AACf,SAAOA,IAAI,CAACC,KAAL,CAAW,CAAX,CAAP;AACA,CAJ8B,CAAhC;;AAMA,MAAMC,mBAAmB,GAAGD,KAAK,IAAIA,KAAK,CAACE,GAAN,CAAUR,MAAM,IAAID,aAAa,CAACC,MAAD,CAAjC,CAArC;;AAEA,MAAMS,QAAQ,GAAG,MAAM;AAEtB;AACA,QAAMC,YAAY,GAAGlB,WAAW,CAACE,gBAAD,CAAhC;AACA,QAAMiB,QAAQ,GAAGlB,WAAW,EAA5B;AACA,QAAM,CAACmB,cAAD,EAAiBC,iBAAjB,IAAsCvB,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACwB,SAAD,EAAYC,YAAZ,IAA4BzB,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM;AAAEU,IAAAA;AAAF,MAAaT,SAAS,EAA5B;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACf;AACA2B,IAAAA,OAAO,CACLC,GADF,CACMV,mBAAmB,CAAC,CAAC,CAACP,MAAF,CAAD,CADzB,EAEEE,IAFF,CAEQG,IAAD,IAAU;AAChB;AACCQ,MAAAA,iBAAiB,CAACR,IAAD,CAAjB;AACAU,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACA,KANF;AAOA,GATQ,EASN,CAACf,MAAD,CATM,CAAT;;AAWA,QAAMkB,eAAe,GAAIC,CAAD,IAAO;AAC9B;AACAR,IAAAA,QAAQ,CAAChB,eAAe,CAACwB,CAAC,CAACC,MAAH,CAAhB,CAAR;AACA,GAHD;;AAKA,QAAM,CAACC,MAAD,IAAWT,cAAjB;AACA,QAAMU,KAAK,GAAGD,MAAM,IAAIX,YAAY,CAACa,QAAb,CAAsB,CAACF,MAAM,CAACD,MAA9B,CAAxB;AAEA,sBACC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEN,SAAS,gBACP,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADO,gBAEP;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACD;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEO,MAAM,CAACG,OADT,CADD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEH,MAAM,CAACI,eADT,CAJD,eAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPD,eAUC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEJ,MAAM,CAACK,OADT,CAVD,eAaC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbD,eAgBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEL,MAAM,CAACM,WADT,CAhBD,eAmBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAnBD,eAsBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEN,MAAM,CAACO,OADT,CAtBD,CAJD,CADC,eAgCD;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,GAAG,EAAEP,MAAM,CAACQ,YAAjB;AAA+B,IAAA,MAAM,EAAE,GAAvC;AAA4C,IAAA,KAAK,EAAE,GAAnD;AAAwD,IAAA,GAAG,EAAC,EAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AACC,IAAA,SAAS,EAAC,KADX;AAEC,IAAA,OAAO,EAAE,MAAMX,eAAe,CAAC;AAAEE,MAAAA,MAAM,EAAE,CAACC,MAAM,CAACD;AAAlB,KAAD,CAF/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE,CAACE,KAAD,gBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAU,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAV,oBAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAzB,CADF,gBAEE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAU,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAV,oBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAtB,CANJ,CADD,CAFD,CAhCC,CAHJ,CADD,CADD;AAsDA,CAlFD;;AAoFA,eAAeb,QAAf","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectFavourites, toggleFavourite } from \"../features/favourites/favouritesSlice\";\r\nimport { Spinner } from \"../common/\";\r\nimport { FaHeart, FaRegHeart } from \"react-icons/fa\";\r\n\r\nconst fetchByMealId = mealId => fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`)\r\n\t.then(res => res.json())\r\n\t.then((data) => { \r\n\t\treturn data.meals[0];\r\n\t});\r\n\r\nconst fetchFavouriteMeals = meals => meals.map(mealId => fetchByMealId(mealId));\r\n\r\nconst ItemPage = () => {\r\n\r\n\t// Nothing\r\n\tconst myFavourites = useSelector(selectFavourites);\r\n\tconst dispatch = useDispatch();\r\n\tconst [recipeResource, setRecipeResource] = useState([]);\r\n\tconst [isLoading, setIsLoading] = useState(true);\r\n\tconst { mealId } = useParams();\r\n\r\n\tuseEffect(() => {\r\n\t\t//console.log(\"STARTUP\");\r\n\t\tPromise\r\n\t\t\t.all(fetchFavouriteMeals([+mealId]))\r\n\t\t\t.then((data) => {\r\n\t\t\t//console.log(\"DATA\", data)\r\n\t\t\t\tsetRecipeResource(data);\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t});\r\n\t}, [mealId]);\r\n\r\n\tconst handleFavourite = (e) => {\r\n\t\t//console.log(\"handleFavourite\", e);\r\n\t\tdispatch(toggleFavourite(e.idMeal));\r\n\t};\r\n\r\n\tconst [recipe] = recipeResource;\r\n\tconst isFav = recipe && myFavourites.includes(+recipe.idMeal);\r\n\r\n\treturn (\r\n\t\t<div className=\"App-main\">\r\n\t\t\t<div className=\"App-inner\">\r\n\t\t\t\t{isLoading \r\n\t\t\t\t\t? <Spinner /> \r\n\t\t\t\t\t: <div className=\"item\">\r\n\t\t\t\t\t\t<div className=\"item__meta\">\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t{recipe.strMeal}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<dl>\r\n\t\t\t\t\t\t\t\t<dt>\r\n\t\t\t\t\t\t\t\t\tDescription\r\n\t\t\t\t\t\t\t\t</dt>\r\n\t\t\t\t\t\t\t\t<dd>\r\n\t\t\t\t\t\t\t\t\t{recipe.strInstructions}\r\n\t\t\t\t\t\t\t\t</dd>\r\n\t\t\t\t\t\t\t\t<dt>\r\n\t\t\t\t\t\t\t\t\tArea\r\n\t\t\t\t\t\t\t\t</dt>\r\n\t\t\t\t\t\t\t\t<dd>\r\n\t\t\t\t\t\t\t\t\t{recipe.strArea}\r\n\t\t\t\t\t\t\t\t</dd>\r\n\t\t\t\t\t\t\t\t<dt>\r\n\t\t\t\t\t\t\t\t\tCategory\r\n\t\t\t\t\t\t\t\t</dt>\r\n\t\t\t\t\t\t\t\t<dd>\r\n\t\t\t\t\t\t\t\t\t{recipe.strCategory}\r\n\t\t\t\t\t\t\t\t</dd>\r\n\t\t\t\t\t\t\t\t<dt>\r\n\t\t\t\t\t\t\t\t\tTags\r\n\t\t\t\t\t\t\t\t</dt>\r\n\t\t\t\t\t\t\t\t<dd>\r\n\t\t\t\t\t\t\t\t\t{recipe.strTags}\r\n\t\t\t\t\t\t\t\t</dd>\r\n\t\t\t\t\t\t\t</dl>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"item__thumb\">\r\n\t\t\t\t\t\t\t<img src={recipe.strMealThumb} height={300} width={300} alt=\"\"/>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\t\tclassName=\"cta\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => handleFavourite({ idMeal: +recipe.idMeal })}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{!isFav \r\n\t\t\t\t\t\t\t\t\t\t? <Fragment><FaRegHeart /> <span>Add to favourites</span></Fragment> \r\n\t\t\t\t\t\t\t\t\t\t: <Fragment><FaHeart /> <span>Remove from favourites</span></Fragment>} \r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ItemPage;\r\n"]},"metadata":{},"sourceType":"module"}